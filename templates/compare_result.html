{% extends 'layout.html' %}

{% block title %}Результат Порівняння - Social Pro{% endblock %}

{% block content %}
<!-- "Видавлена" картка -->
<div class="bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-xl border border-gray-700 w-full">
    
    <h1 class="text-2xl sm:text-3xl font-bold text-center text-white mb-6">
        Результат Порівняння
    </h1>

    <!-- 
        Адаптивна таблиця ("втиснута")
    -->
    <div class="overflow-x-auto bg-gray-900 shadow-inner shadow-black/60 border border-gray-700 rounded-lg">
        <table class="min-w-full divide-y divide-gray-700">
            <thead class="bg-gray-800/50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                        Показник
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                        Канал #1: <span class="text-blue-400">{{ data1.username or data1.name }}</span>
                    </th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                        Канал #2: <span class="text-blue-400">{{ data2.username or data2.name }}</span>
                    </th>
                </tr>
            </thead>
            <tbody class="bg-gray-900 divide-y divide-gray-700">
                
                <!-- ТІЛЬКИ Telegram -->
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Підписники</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data1.subscribers).replace(',', ' ') }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data2.subscribers).replace(',', ' ') }}</td>
                </tr>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Сер. Перегляди</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data1.avg_views).replace(',', ' ') }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data2.avg_views).replace(',', ' ') }}</td>
                </tr>
                <!-- Акцентний рядок -->
                <tr class="bg-blue-900/30">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-300">Engagement Rate (ER)</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-300">{{ "%.2f"|format(data1.er) }}%</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-300">{{ "%.2f"|format(data2.er) }}%</td>
                </tr>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Коеф. Реакцій (RR)</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "%.2f"|format(data1.reaction_rate) }}%</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "%.2f"|format(data2.reaction_rate) }}%</td>
                </tr>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Постів / День</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "%.1f"|format(data1.posts_per_day) }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "%.1f"|format(data2.posts_per_day) }}</td>
                </tr>
                 <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Розкид (Min/Max)</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data1.min_views) }} / {{ "{:,.0f}".format(data1.max_views) }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">{{ "{:,.0f}".format(data2.min_views) }} / {{ "{:,.0f}".format(data2.max_views) }}</td>
                </tr>

            </tbody>
        </table>
    </div>

    <!-- Кнопка "Назад" -->
    <div class="mt-8 text-center">
        <a 
            href="{{ url_for('compare_page') }}"
            class="w-full sm:w-auto inline-block bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-gray-600 transition duration-200"
        >
            Порівняти ще
        </a>
    </div>
</div>
{% endblock %}